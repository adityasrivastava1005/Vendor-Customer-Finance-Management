<!DOCTYPE html>
<html>
<head>
    <title>Vendor Registration</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">Finance Management System</div>
    </nav>

    <div class="container">
        <div class="login-box">
            <h2>Vendor Registration</h2>
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <form method="POST" class="login-form">
                <div class="form-group">
                    <label for="vendor_id">Vendor ID:</label>
                    <input type="text" name="vendor_id" id="vendor_id" placeholder="e.g., V001" required>
                    <small>Must be unique (e.g., V001, V123)</small>
                </div>
                
                <div class="form-group">
                    <label for="name">Business Name:</label>
                    <input type="text" name="name" id="name" placeholder="Your Business Name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address:</label>
                    <input type="email" name="email" id="email" placeholder="vendor@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="mobile_no">Mobile Number:</label>
                    <input type="tel" name="mobile_no" id="mobile_no" placeholder="1234567890" required>
                </div>
                
                <h3 style="margin-top: 20px;">Location Details</h3>
                
                <div class="form-group">
                    <label for="state">State:</label>
                    <input type="text" name="state" id="state" placeholder="e.g., Maharashtra" required>
                </div>
                
                <div class="form-group">
                    <label for="city">City:</label>
                    <input type="text" name="city" id="city" placeholder="e.g., Mumbai" required>
                </div>
                
                <div class="form-group">
                    <label for="town">Town/Area:</label>
                    <input type="text" name="town" id="town" placeholder="e.g., Bandra" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" name="password" id="password" placeholder="Password" required minlength="6">
                </div>
                
                <div class="form-group">
                    <label for="confirm_password">Confirm Password:</label>
                    <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm Password" required>
                </div>
                
                <h3 style="margin-top: 20px;">Products (Optional)</h3>
                <div id="products-container">
                    <div class="product-entry" style="border: 1px solid #ddd; padding: 15px; margin-bottom: 10px; border-radius: 5px;">
                        <div class="form-group">
                            <label for="product_name_0">Product Name:</label>
                            <input type="text" name="product_name" class="product_name" placeholder="e.g., Laptop" data-index="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="product_price_0">Price (₹):</label>
                            <input type="number" name="product_price" class="product_price" placeholder="e.g., 50000" step="0.01" data-index="0">
                        </div>
                        
                        <button type="button" class="btn-remove-product" style="background-color: #dc3545; display: none;" onclick="removeProduct(this)">Remove Product</button>
                    </div>
                </div>
                
                <button type="button" class="btn-primary" onclick="addProduct()" style="margin-bottom: 20px;">Add Another Product</button>
                
                <button type="submit" class="btn-primary">Register</button>
            </form>
            
            <div class="register-link">
                <p>Already have an account? <a href="{{ url_for('vendor_login') }}">Login here</a></p>
            </div>
        </div>
    </div>

    <script>
        let productCount = 1;

        function addProduct() {
            const container = document.getElementById('products-container');
            const newProduct = document.createElement('div');
            newProduct.className = 'product-entry';
            newProduct.style.cssText = 'border: 1px solid #ddd; padding: 15px; margin-bottom: 10px; border-radius: 5px;';
            newProduct.innerHTML = `
                <div class="form-group">
                    <label for="product_name_${productCount}">Product Name:</label>
                    <input type="text" name="product_name" class="product_name" placeholder="e.g., Laptop" data-index="${productCount}">
                </div>
                
                <div class="form-group">
                    <label for="product_price_${productCount}">Price (₹):</label>
                    <input type="number" name="product_price" class="product_price" placeholder="e.g., 50000" step="0.01" data-index="${productCount}">
                </div>
                
                <button type="button" class="btn-remove-product" style="background-color: #dc3545;" onclick="removeProduct(this)">Remove Product</button>
            `;
            container.appendChild(newProduct);
            productCount++;
            updateRemoveButtons();
        }

        function removeProduct(button) {
            button.parentElement.remove();
            updateRemoveButtons();
        }

        function updateRemoveButtons() {
            const entries = document.querySelectorAll('.product-entry');
            const removeButtons = document.querySelectorAll('.btn-remove-product');
            removeButtons.forEach((btn, index) => {
                if (entries.length === 1) {
                    btn.style.display = 'none';
                } else {
                    btn.style.display = 'block';
                }
            });
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', updateRemoveButtons);
    </script>
</body>
</html> 